"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const container_image_1 = require("../container-image");
/**
 * A container image hosted on DockerHub or another online registry
 */
class RepositoryImage extends container_image_1.ContainerImage {
    constructor(imageName, props = {}) {
        super();
        this.imageName = imageName;
        this.credentialsSecret = props.credentials;
    }
    bind(containerDefinition) {
        if (this.credentialsSecret) {
            this.credentialsSecret.grantRead(containerDefinition.taskDefinition.obtainExecutionRole());
        }
    }
    toRepositoryCredentialsJson() {
        if (!this.credentialsSecret) {
            return undefined;
        }
        return {
            credentialsParameter: this.credentialsSecret.secretArn
        };
    }
}
exports.RepositoryImage = RepositoryImage;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVwb3NpdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlcG9zaXRvcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSx3REFBb0Q7QUFVcEQ7O0dBRUc7QUFDSCxNQUFhLGVBQWdCLFNBQVEsZ0NBQWM7SUFLakQsWUFBWSxTQUFpQixFQUFFLFFBQThCLEVBQUU7UUFDN0QsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUMzQixJQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQztJQUM3QyxDQUFDO0lBRU0sSUFBSSxDQUFDLG1CQUF3QztRQUNsRCxJQUFJLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtZQUMxQixJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLG1CQUFtQixDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUM7U0FDNUY7SUFDSCxDQUFDO0lBRU0sMkJBQTJCO1FBQ2hDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFBRSxPQUFPLFNBQVMsQ0FBQztTQUFFO1FBQ2xELE9BQU87WUFDTCxvQkFBb0IsRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUztTQUN2RCxDQUFDO0lBQ0osQ0FBQztDQUNGO0FBdkJELDBDQXVCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzZWNyZXRzbWFuYWdlciA9IHJlcXVpcmUoJ0Bhd3MtY2RrL2F3cy1zZWNyZXRzbWFuYWdlcicpO1xuaW1wb3J0IHsgQ29udGFpbmVyRGVmaW5pdGlvbiB9IGZyb20gXCIuLi9jb250YWluZXItZGVmaW5pdGlvblwiO1xuaW1wb3J0IHsgQ29udGFpbmVySW1hZ2UgfSBmcm9tIFwiLi4vY29udGFpbmVyLWltYWdlXCI7XG5pbXBvcnQgeyBDZm5UYXNrRGVmaW5pdGlvbiB9IGZyb20gJy4uL2Vjcy5nZW5lcmF0ZWQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlcG9zaXRvcnlJbWFnZVByb3BzIHtcbiAgICAvKipcbiAgICAgKiBPcHRpb25hbCBzZWNyZXQgdGhhdCBob3VzZXMgY3JlZGVudGlhbHMgZm9yIHRoZSBpbWFnZSByZWdpc3RyeVxuICAgICAqL1xuICAgIHJlYWRvbmx5IGNyZWRlbnRpYWxzPzogc2VjcmV0c21hbmFnZXIuSVNlY3JldDtcbn1cblxuLyoqXG4gKiBBIGNvbnRhaW5lciBpbWFnZSBob3N0ZWQgb24gRG9ja2VySHViIG9yIGFub3RoZXIgb25saW5lIHJlZ2lzdHJ5XG4gKi9cbmV4cG9ydCBjbGFzcyBSZXBvc2l0b3J5SW1hZ2UgZXh0ZW5kcyBDb250YWluZXJJbWFnZSB7XG4gIHB1YmxpYyByZWFkb25seSBpbWFnZU5hbWU6IHN0cmluZztcblxuICBwcml2YXRlIGNyZWRlbnRpYWxzU2VjcmV0Pzogc2VjcmV0c21hbmFnZXIuSVNlY3JldDtcblxuICBjb25zdHJ1Y3RvcihpbWFnZU5hbWU6IHN0cmluZywgcHJvcHM6IFJlcG9zaXRvcnlJbWFnZVByb3BzID0ge30pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuaW1hZ2VOYW1lID0gaW1hZ2VOYW1lO1xuICAgIHRoaXMuY3JlZGVudGlhbHNTZWNyZXQgPSBwcm9wcy5jcmVkZW50aWFscztcbiAgfVxuXG4gIHB1YmxpYyBiaW5kKGNvbnRhaW5lckRlZmluaXRpb246IENvbnRhaW5lckRlZmluaXRpb24pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jcmVkZW50aWFsc1NlY3JldCkge1xuICAgICAgdGhpcy5jcmVkZW50aWFsc1NlY3JldC5ncmFudFJlYWQoY29udGFpbmVyRGVmaW5pdGlvbi50YXNrRGVmaW5pdGlvbi5vYnRhaW5FeGVjdXRpb25Sb2xlKCkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB0b1JlcG9zaXRvcnlDcmVkZW50aWFsc0pzb24oKTogQ2ZuVGFza0RlZmluaXRpb24uUmVwb3NpdG9yeUNyZWRlbnRpYWxzUHJvcGVydHkgfCB1bmRlZmluZWQge1xuICAgIGlmICghdGhpcy5jcmVkZW50aWFsc1NlY3JldCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWRlbnRpYWxzUGFyYW1ldGVyOiB0aGlzLmNyZWRlbnRpYWxzU2VjcmV0LnNlY3JldEFyblxuICAgIH07XG4gIH1cbn1cbiJdfQ==